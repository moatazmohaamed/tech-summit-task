<div
  class="container mx-auto px-9 md:px-0 flex flex-col justify-start text-black bg-white dark:text-white dark:bg-black">
  <app-header></app-header>

  @if(loading){
  <div class="flex justify-center items-center">
    <mat-spinner></mat-spinner>
  </div>
  } @else {
  <div class="grid  md:grid-cols-2 lg:grid-cols-5  gap-6">
    @for (product of filteredProducts; track product.id) {
    <div class="shadow-md rounded-lg ">
      <div class="flex justify-center items-center w-full h-40 bg-gray-100 rounded-t-lg">
        <div [routerLink]='["/details" , product.id]'
          class="w-full h-full flex cursor-pointer relative items-center justify-center">
          <img class="max-h-full max-w-full object-contain" [src]='product.image' [alt]="product.title">
          <div class="bg-black px-3 py-1  rounded-1 text-white dark:bg-white dark:text-black absolute top-0 right-0">
            {{product.category}}
          </div>
        </div>
      </div>
      <div class="px-5 py-5 ">
        <h3 class="font-semibold text-xl my-5 tracking-tight ">
          {{product.title.split(" ", 3).join(" ")}}
        </h3>
        <div class="flex items-center gap-2 mb-3">
          <div class="rating rating-sm">
            @for (star of [1,2,3,4,5]; track star) {
            <input type="radio" [checked]="product.rating.rate >= star" class="mask mask-star-2 bg-gray-400" disabled />
            }
          </div>
          <span class="text-gray-500 text-sm">{{product.rating.rate}} ({{product.rating.count}})</span>
        </div>

        <div class="flex items-center justify-between">
          <span class="text-xl font-bold ">{{product.price | currency:"USD" }}</span>
          <div class="flex gap-2">
            <button (click)="toggleWishlist(product.id)"
              class="text-white cursor-pointer bg-red-600 hover:bg-red-700 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-3 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"
              [ngClass]="{'bg-red-700 dark:bg-red-700': isInWishlist(product.id)}">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                [ngClass]="{'fill-white': isInWishlist(product.id)}">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
              </svg>
            </button>
            <button (click)="addToCart(product.id)"
              class="text-white cursor-pointer bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Add
              to cart</button>
          </div>
        </div>
      </div>
    </div>
    }


  </div>
  @if(filteredProducts.length === 0){
  <div class="flex justify-center h-screen items-center dark:bg-black">
    <h1 class="text-3xl font-extrabold dark:text-white">
      There is no product with this name
    </h1>
  </div>
  }
  }

  

</div>
